<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard â€” Omni-Solutions</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="/admin-dashboard.css">

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

</head>
<body>

<div id="sidebar">
    <div class="admin-head">
        <img src="/assets/admin.png" class="admin-photo">
        <h3>Admin Panel</h3>
        <span class="admin-secret">SECURE</span>
    </div>

    <div class="nav-section">Navigation</div>
    <div class="nav-item" onclick="showPage('overview')">ğŸ“Š Overview</div>
    <div class="nav-item" onclick="showPage('contractors')">ğŸ§± Contractors</div>
    <div class="nav-item" onclick="showPage('leads')">ğŸ“¨ Leads</div>
    <div class="nav-item" onclick="showPage('reviews')">â­ Reviews</div>
    <div class="nav-item" onclick="showPage('badges')">ğŸ… Badges</div>
    <div class="nav-item" onclick="showPage('billing')">ğŸ’³ Subscriptions</div>
    <div class="nav-item" onclick="showPage('messages')">âœ‰ Support Messages</div>
    <div class="nav-item" onclick="showPage('telegram')">ğŸ¤– Telegram Host</div>
    <div class="nav-item" onclick="showPage('theme')">ğŸ¨ Theme Control</div>

    <div class="nav-section">Account</div>
    <div class="nav-item" onclick="logout()">ğŸšª Logout</div>
</div>

<div id="content">

    <!-- OVERVIEW -->
    <div class="page" id="overview">
        <h1>Admin Overview</h1>

        <div class="cards">
            <div class="card">Total Contractors<br><span id="countContractors">0</span></div>
            <div class="card">Total Leads<br><span id="countLeads">0</span></div>
            <div class="card">Total Reviews<br><span id="countReviews">0</span></div>
        </div>

        <h2>Top Contractors</h2>
        <div id="topContractors"></div>
    </div>

    <!-- CONTRACTOR MANAGEMENT -->
    <div class="page" id="contractors">
        <h1>Contractor Management</h1>
        <input id="searchContractor" placeholder="Search contractor..." oninput="filterContractors()">

        <div id="contractorList"></div>
    </div>

    <!-- LEADS -->
    <div class="page" id="leads">
        <h1>All Leads</h1>
        <div id="leadList"></div>
    </div>

    <!-- REVIEWS -->
    <div class="page" id="reviews">
        <h1>Reviews Moderation</h1>
        <div id="reviewList"></div>
    </div>

    <!-- BADGES -->
    <div class="page" id="badges">
        <h1>Assign Badges</h1>

        <label>Select Contractor</label>
        <select id="badgeContractor"></select>

        <label>Select Badge</label>
        <select id="badgeType">
            <option value="bronze">Bronze</option>
            <option value="silver">Silver</option>
            <option value="gold">Gold</option>
            <option value="platinum">Platinum</option>
            <option value="diamond">Diamond</option>
        </select>

        <button onclick="applyBadge()">Assign Badge</button>

        <div id="badgePreview"></div>
    </div>

    <!-- BILLING -->
    <div class="page" id="billing">
        <h1>Subscription Control</h1>

        <label>Select Contractor</label>
        <select id="subContractor"></select>

        <label>Subscription Tier</label>
        <select id="subPlan">
            <option value="none">No Plan</option>
            <option value="basic-month">Basic â€” R350/m</option>
            <option value="basic-6">Basic â€” R1999/6 months</option>
            <option value="basic-year">Basic â€” R3599/year</option>
            <option value="premium-month">Premium â€” R500/m</option>
            <option value="premium-6">Premium â€” R2599/6 months</option>
            <option value="premium-year">Premium â€” R4999/year</option>
        </select>

        <button onclick="applySubscription()">Apply Subscription</button>

        <h2>Account Actions</h2>
        <button onclick="deactivateAccount()">Deactivate</button>
        <button onclick="activateAccount()">Activate</button>
        <button onclick="deleteAccount()">Delete Account</button>
    </div>

    <!-- MESSAGES -->
    <div class="page" id="messages">
        <h1>Messages to Admin</h1>
        <div id="messageList"></div>
    </div>

    <!-- TELEGRAM OVERRIDE -->
    <div class="page" id="telegram">
        <h1>Telegram Host Settings</h1>

        <label>Admin Bot Token</label>
        <input id="adminBotToken">

        <label>Admin Chat ID</label>
        <input id="adminChatId">

        <button onclick="saveAdminTelegram()">Save Telegram Host</button>
    </div>

    <!-- THEME -->
    <div class="page" id="theme">
        <h1>Theme Control</h1>
        <p>Change colour for ALL contractor dashboards</p>
        <input type="color" id="globalThemeColor" onchange="applyGlobalTheme()">
    </div>

</div>

<script src="/admin-dashboard.js"></script>
</body>
</html>
