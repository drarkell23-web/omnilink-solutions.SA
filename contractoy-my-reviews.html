<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>My Reviews — OmniLead</title>
<link rel="stylesheet" href="/ui.css">
</head>
<body>
<div class="container">
<div class="card">
<h2>My Reviews</h2>
<div id="list"></div>
<button class="small" onclick="location.href='/contractor-dashboard.html'">Back</button>
</div>
</div>


<script type="module">
import { supabase } from './supabase-client.js';
async function load(){
const { data: { user } } = await supabase.auth.getUser();
if(!user) return window.location.href = '/contractor-login.html';


const { data } = await supabase.from('reviews').select('*').eq('contractor_id', user.id).order('created_at', { ascending:false });
const list = document.getElementById('list');
list.innerHTML = '';
(data||[]).forEach(r=>{
const el = document.createElement('div'); el.className='review';
el.innerHTML = `<strong>${r.reviewer_name}</strong> — ⭐ ${r.rating}<p class="subtle">${new Date(r.created_at).toLocaleString()}</p><div>${r.comment}</div>`;
list.appendChild(el);
});
}
window.addEventListener('DOMContentLoaded', load);
</script>
</body>
</html>
